var Sifi=Sifi||function(){this.version="1.1.9",this.libraryBase="https://cdn.simpli.fi/pixels/";var s=[],d={},r=function(e,n){var t=document.getElementsByTagName("script")[0],i=document.createElement("script");i.onload=function(){n(!0)},i.onerror=function(){n(!1)},i.src=e,t.parentNode.insertBefore(i,t)},o=function(e){return/https?:\/\//.test(e)?e:libraryBase+e+"-"+version+".min.js"},e=function(e,n){var t=0,i=function(){0==t&&n()};e.forEach(function(n){Sifi.modules[n]===undefined&&(t++,r(o(n),function(e){e||s.push(n),t--,i()}))}),i()},u=function(o,a){e(o,function(){var e=[];for(var n in Sifi.modules)d[n]===undefined&&(d[n]=Sifi.modules[n](this)),d[n].requires!==undefined&&(e=e.concat(d[n].requires));var t=[];e.forEach(function(e){Sifi.modules[e]===undefined&&-1==t.indexOf(e)&&-1==s.indexOf(e)&&t.push(e)});var r=this,i=function(e){for(var n=[],t=0,i=o.length;t<i;t++)n.push(d[o[t]]);e&&e.apply(r,n)};0!=t.length?u(t,function(){i(a)}):i(a)})},n=Array.prototype.slice.call(arguments),t=n.pop(),i=n[0]&&"string"==typeof n[0]?n:n[0];if(this.unloadModules=function(){d={},delete Sifi._instance},this.fetchNeeded=u,!(this instanceof Sifi))return Sifi._instance?Sifi._instance.fetchNeeded(i,t):Sifi._instance=new Sifi(i,t),Sifi._instance;u(i,t)};Sifi.modules={},Sifi.modules.ajax=function(e){function n(){var e={},n=function(e,n,t,i,r){var o;t=!1!==t;try{o=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0")}catch(a){r&&r(a)}o.open(n?"POST":"GET",e,t),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&(200<=o.status&&o.status<300?i&&i(o.responseText,o):r&&r({status:o.status}))},o.send(n)},t=function(e){var n,t="";for(n in e)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.slice(1)};return e.request=n,e.uriEncode=t,e}return e.ajax=new n(e),e.ajax.requires=[],e.ajax},Sifi.modules.engagement=function(e){function n(o){var e={},t=function(e,n){o.ajax.request(e,null,n)},a=function(e,n){if(!/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)&&navigator.sendBeacon&&e.match(/^https:/i))return navigator.sendBeacon(e);t(e,n)},n=function(e,n,t){var i=o.ajax.uriEncode(n),r="https://eastevents.simpli.fi/ve/";a(r+=e+"?"+i,t)},i=function(e){return e.params.response_format=e.is_xhr?"xhr":"pixel",n("milestone",e.params,e.async)};return e.send=n,e.sendMilestone=i,e}return e.engagement=new n(e),e.engagement.requires=["ajax"],e.engagement},Sifi.modules.BaseViewer=function(e){function n(a){var s={},r=null,o=!1,d=!1,u=Date.now(),c=null;s.VIEW_DURATION_MS=1e3,s.MIN_IN_VIEW_DURATION_TO_RECORD_MS=100;var t,i,f=3e5,l=!1,w="exit",m="viewability",h="tab_lost_focus",g=null,v=null,p="undefined"==typeof mraid?undefined:mraid,x=null,y=function(e){var n=Date.now()-g,t=s.getContext().addContextToParams({milestone:"heartbeat",detail:n,context:e});g=Date.now(),a.engagement.sendMilestone({params:t,is_xhr:!0,async:!0})},V=function(){s.getContext().useHeartbeat()&&(g=Date.now(),v=setInterval(function(){y("interval")},15e3))},e=function(e){if(s.getContext().useHeartbeat())clearInterval(v),v=null,y(e);else{var n=s.getContext().addContextToParams({milestone:e});a.engagement.sendMilestone({params:n,is_xhr:!0,async:!0})}},I=function(){if(!x)return 0;var e=window.screen.availWidth,n=window.screen.availHeight;return 0<=x.left&&x.right<=e&&0<=x.top&&x.bottom<=n?1:(Math.min(x.right,e)-Math.max(0,x.left))*(Math.min(x.bottom,n)-Math.max(0,x.top))/((x.right-x.left)*(x.bottom-x.top))},_=function(e){var n=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?2:1,t=window.devicePixelRatio/n,i=parseInt(s.getContext().width)*t,r=parseInt(s.getContext().height)*t,o=e.screenX-e.clientX*t,a=e.screenY-e.clientY*t;x={left:o,right:o+i,top:a,bottom:a+r}},n=function(){var e=window.screen.availWidth-window.screenX,n=window.screen.availHeight-window.screenY;return!!(x&&I()<s.getContext().inViewThreshold())||!x&&(e<s.getContext().width||n<s.getContext().height)},b=function(){return l||n()},C=function(){l=document[t],b()?e("went_hidden"):v||V(),s.onCheck(!1)},E=function(){return void 0!==p&&/3\.\d/.test(p.getVersion())},S=function(){if(E()&&p.supports("location")){var e=p.getLocation(),n=s.getContext().addContextToParams({milestone:"device_location",detail:JSON.stringify(e)});a.engagement.sendMilestone({params:n,is_xhr:!0,async:!0})}},T=function(){E()&&("loading"==p.getState()?p.addEventListener("ready",function(){p.removeEventListener("ready",arguments.callee),S()}):S())},M=!1,P=function(){return M},L=function(e,n){return!P()&&(M=!0,s.context=e,void 0===n&&(n=function(){}),"undefined"!=typeof document.hidden?(t="hidden",i="visibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),document.addEventListener(i,C,!1),document.addEventListener("mousemove",_,!1),V(),s.startingUp(n),T(),!0)},B=function(){throw new Error("Subclass must implement startingUp")},O=function(){throw new Error("Subclass must implement getPercentInView")},R=function(){throw new Error("Subclass must implement getViewerType")},D=function(){},A=function(){return s.context},F=function(){clearTimeout(r),r=null},N=function(e,n){var t=Date.now(),i=Math.round(t-c);if(e!=w&&i<s.MIN_IN_VIEW_DURATION_TO_RECORD_MS)return!1;var r=Math.round(t-u);if(e==m&&f<r)return!1;var o=s.getContext().addContextToParams({method:s.getViewerType(),duration:i,time_on_page:r,exit_type:e});return a.engagement.send("in_view_duration",o,n),!0},q=function(){return b()?0:s.getPercentInView()},k=function(e){if(s.getContext()){var n=q(),t=s.getContext().inViewThreshold();if(0<n&&!d){var i=s.getContext().addContextToParams({milestone:"partially_visible"});a.engagement.sendMilestone({params:i,is_xhr:!0,async:!0}),d=!0}if(r&&e)return N(w,!1);if(e){i=s.getContext().addContextToParams({milestone:"leaving_page",detail:"mraid: "+a.viewInfo.hasMRAID()+" safeframe: "+a.viewInfo.hasSafeFrame()});return a.engagement.sendMilestone({params:i,is_xhr:!0,async:!1})}if(t<=n&&null==r)c=Date.now(),r=setTimeout(function(){if(!o){var e=s.getContext().addContextToParams({method:s.getViewerType(),time_on_page:Math.round(Date.now()-u),percent:s.getPercentInView()});a.engagement.send("viewability",e,!0),o=!0,s.onVisibilityMet()}},s.VIEW_DURATION_MS);else if(n<t&&r){0,N(l?h:m,!0),F()}}};return"onpagehide"in window?window.addEventListener("pagehide",function(){k(!0)},!0):window.addEventListener("unload",function(){k(!0)},!0),s.startup=L,s.onCheck=k,s.getContext=A,s.getPercentInView=O,s.startingUp=B,s.getViewerType=R,s.onVisibilityMet=D,s.isMraid3=E,s.hasStarted=P,s}return e.BaseViewer=n,e.BaseViewer.requires=["engagement","viewInfo"],e.BaseViewer},Sifi.modules.IntersectionObserverViewer=function(e){function n(e){var n=new e.BaseViewer(e),t=0;return n.getViewerType=function(){return"intersection_observer"},n.getPercentInView=function(){return t},n.startingUp=function(e){new IntersectionObserver(function(e){t=e[0].isIntersecting?100*Math.min(e[0].intersectionRatio,1):0,n.onCheck()},{threshold:[0,.3,.5]}).observe(n.context.ad),e.apply(this)},n}return e.IntersectionObserverViewer=n,e.IntersectionObserverViewer.requires=["BaseViewer"],e.IntersectionObserverViewer},Sifi.modules.TopFrameViewer=function(e){function n(e){var d=new e.BaseViewer(e);d.getViewerType=function(){return"topframe"};var n=function(e){var n=e.getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=n.height||d.context.height,o=n.width||d.context.width,a=i>n.top?Math.min(i-n.top,r):0,s=t>n.left?Math.min(t-n.left,o):0;return Math.round(1e4*a*s/(r*o))/100};d.getPercentInView=function(){return n(d.context.ad)};var t=function(){d.onCheck()};return d.startingUp=function(e){window.addEventListener("scroll",t),window.addEventListener("load",t),window.addEventListener("resize",t),d.onCheck(),e.apply(this)},d}return e.TopFrameViewer=n,e.TopFrameViewer.requires=["BaseViewer"],e.TopFrameViewer},Sifi.modules.SafeFrameViewer=function(e){function n(e){var t,i=new e.BaseViewer(e);i.getViewerType=function(){return"safeframe"},i.getPercentInView=function(){return t.inViewPercentage()};var r=function(e){"geom-update"==e&&i.onCheck()};return i.startingUp=function(e){if((t=window.Y&&Y.SandBox?Y.SandBox.vendor:window.sfAPI)||"undefined"==typeof $sf||(t=$sf.ext),t)try{t.register(i.getContext().width,i.getContext().height,r),i.onCheck()}catch(n){console.log("Exception or no safeframes available: "+n.message,n)}e.apply(this)},i}return e.SafeFrameViewer=n,e.SafeFrameViewer.requires=["BaseViewer"],e.SafeFrameViewer},Sifi.modules.MraidViewer=function(e){function n(i){var r=new i.BaseViewer(i),n=0,t=mraid;r.getViewerType=function(){return"mraid "+t.getVersion()},r.getPercentInView=function(){return n};var o=function(){t.addEventListener("viewableChange",function(e){n=e?100:0,r.onCheck()}),t.isViewable()&&(n=100,r.onCheck())},a=function(){t.addEventListener("exposureChange",function(e){n!=e&&(n=e,r.onCheck())})},s=function(e){r.isMraid3()?a():o(),t.addEventListener("error",function(e,n){var t=r.getContext().addContextToParams({milestone:"mraid_error",detail:e,context:n});i.engagement.sendMilestone({params:t,is_xhr:!0,async:!0})}),e.apply(this)};return r.startingUp=function(e){"loading"==t.getState()?t.addEventListener("ready",function(){t.removeEventListener("ready",arguments.callee),s(e)}):s(e)},r}return e.MraidViewer=n,e.MraidViewer.requires=["BaseViewer","engagement"],e.MraidViewer},Sifi.modules.PixelViewer=function(e){function n(o){var a=new o.BaseViewer(o),s="center",i="tl",r="tr",d="br",u="bl",e="https://cdnpixel.simpli.fi",c={},f=null,l=null,w=1,m={};m[s]=0,m[i]=0,m[r]=0,m[d]=0;m[u]=0;var n=30,t=50,h=25,g=100,v=0;a.REMAINED_OUT_OF_VIEW_WAIT_MS=1e3;var p=null;a.getViewerType=function(){return"pixel"};var x=function(){return 0<m[s]&&2<=m[i]+m[r]+m[d]+m[u]};a.getPercentInView=function(){var e=m[s]+m[i]+m[r]+m[d]+m[u];return x()||0!=e?5==e?g:x()?a.getContext().isLargeAd()?n:t:h:v};var y=function(){var e=a.getContext(),n=parseInt(e.width),t=parseInt(e.height);c[s]={x:.5*n,y:.5*t},c[i]={x:0,y:0},c[r]={x:n-w,y:0},c[d]={x:n-w,y:t-w},c[u]={x:0,y:t-w}},V=function(e,n){var t=c[e],i=document.createElement("iframe"),r=a.getContext();void 0!==n&&i.addEventListener("load",n),i.style.position="absolute",e==s&&r.isLargeAd()?(i.width=.35*r.width,i.height=.35*r.height,i.style.left=t.x-i.width/2+"px",i.style.top=t.y-i.height/2+"px"):(i.style.left=t.x+"px",i.style.top=t.y+"px",i.width=w,i.height=w),i.style.border="0",base_url=f+"/pixels/idle-"+o.version+".html",i.src=base_url+"#pos="+e+"&sender="+r.transactionId(),document.body.insertBefore(i,document.body.firstChild)},I=function(){var e="attachEvent",n="onmessage";window.addEventListener&&(e="addEventListener",n="message"),window[e](n,function(e){var n=JSON.parse(e.data);if(e.origin==l&&a.getContext().transactionId()==n.sender){var t=x();m[n.position]="sifi_onscreen"==n.action?1:0;var i=x();i&&p&&(clearTimeout(p),p=null),t&&!i&&null==p?p=setTimeout(function(){a.onCheck(),p=null},a.REMAINED_OUT_OF_VIEW_WAIT_MS):a.onCheck()}},!1),window.addEventListener("onscroll",function(){a.onCheck()})};return a.startingUp=function(t){I(),y(),V(s,function(){var e=0,n=function(){4==(e+=1)&&t.apply(this)};V(i,n),V(r,n),V(d,n),V(u,n)})},a.onVisibilityMet=function(){},a.setPixelServer=function(e){var n=(f=e).match(/(http[s]?:\/\/[^\/]+)/);return l=2<=n.length?n[1]:e},a.setPixelServer(e),a}return e.PixelViewer=n,e.PixelViewer.requires=["BaseViewer"],e.PixelViewer},Sifi.modules.viewInfo=function(e){function i(e){if(!(this instanceof i))return new i(e);var n={},t=null;return n.isTopFrame=function(){return window===window.top},n.hasSafeFrame=function(){return void 0!==(window.Y&&Y.SandBox?Y.SandBox.vendor:window.sfAPI)||"undefined"!=typeof $sf},n.hasMRAID=function(){return"undefined"!=typeof mraid},n.hasIntersectionObserver=function(){return"undefined"!=typeof IntersectionObserver},n.availableViewers=function(){return viewers=["Pixel"],n.isTopFrame()&&viewers.push("TopFrame"),n.hasSafeFrame()&&viewers.push("SafeFrame"),n.hasMRAID()&&viewers.push("MRAID "+mraid.getVersion()),n.hasIntersectionObserver()&&viewers.push("IntersectionObserver"),"undefined"!=typeof inDapIF&&inDapIF&&viewers.push("FriendlyIframe"),viewers},n.getViewer=function(){return t||(t=n.hasIntersectionObserver()?new e.IntersectionObserverViewer(e):n.hasMRAID()?new e.MraidViewer(e):new e.PixelViewer(e))},n}return e.viewInfo=new i(e),e.viewInfo.requires=["IntersectionObserverViewer","MraidViewer","PixelViewer"],e.viewInfo},Sifi.modules.contextReader=function(e){function n(){var e={},a=242500,s=50,d=30,u={DESKTOP:"701",MOBILE:"702",TABLET:"703"},c={ad_id:"ad_id",sifi_day:"sifi_day",sifi_uid:"sifi_uid",tid:"transaction_id",cid:"campaign_id",device:"device",publisher:"pub_id",heartbeat:"heartbeat",width:!1,height:!1},f="sifi_creative",l="body",n=function(e,t){e=void 0===e?document.getElementsByClassName(f)[0]||document.getElementsByTagName(l)[0]:e,t=void 0===t?c:t;var n,i={},r=document.currentScript||(n=document.getElementsByTagName("script"))[n.length-1];for(var o in r=document.getElementById("viewpx"),t)i[o]=r.getAttribute(o);return i.ad=e,i.isLargeAd=function(){return i.width*i.height>=a},i.useHeartbeat=function(){return"heartbeat"in i&&"true"===i.heartbeat},i.isMobileDevice=function(){return i.device==u.MOBILE||i.device==u.TABLET},i.inViewThreshold=function(){return this.isLargeAd()&&!this.isMobileDevice()?d:s},i.addContextToParams=function(e){for(var n in t)t[n]&&(e[t[n]]=i[n]);return e},i.transactionId=function(){return i.tid||""},i};return e.getContext=n,e.LARGE_AD_VIEW_PERCENT=d,e.DEVICE_IDS=u,e}return e.contextReader=new n(e),e.contextReader.requires=[],e.contextReader},document.addEventListener("DOMContentLoaded",function(){Sifi("viewInfo","contextReader","engagement",function(n,e,t){var i=e.getContext();n.getViewer().startup(i,function(){var e=i.addContextToParams({milestone:"initialized",context:n.getViewer().getViewerType(),detail:window===window.top?window.location:document.referrer});t.sendMilestone({params:e,is_xhr:!0,async:!0})})})}),window.addEventListener("load",function(){Sifi("viewInfo","contextReader","engagement",function(e,n,t){var i=n.getContext().addContextToParams({milestone:"ad_loaded",context:e.getViewer().getViewerType(),detail:e.availableViewers().join(",")});t.sendMilestone({params:i,is_xhr:!0,async:!0})})}),window.addEventListener("load",function(){var e=0;window.addEventListener("error",function(i){0<e++||Sifi("contextReader","engagement",function(e,n){var t=e.getContext().addContextToParams({milestone:"js_error",context:null,detail:i.error||i.message});n.sendMilestone({params:t,is_xhr:!0,async:!0})})})});